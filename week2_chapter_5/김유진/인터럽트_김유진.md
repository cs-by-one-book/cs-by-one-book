# 인터럽트

## 소프트웨어를 이용한 해결방법

### 폴링(polling)

​	어떤 상태를 확인하기 위한 동작을 큰 작업의 사이사이에 수행하지 않고 큰 작업을 작은 하위 작업들로 나누고 하위 작업들 사이사이에 상태를 확인하는 방법

*  장점 

   정해진 순서에 따라서 명령을 반복적으로 처리하므로 프로그램 작성이 쉽고 이해하기가 쉽다. (소규모 프로그램 작성할 때 유용)

*  단점

   입출력 장치들과의 상효작용을 폴링 방식으로하는 경우 입출력 장치들이 많을 수록 CPU를 점유하는 시간이 줄어들어 작업 수행 성능이 크게 떨어진다.

   여전히 작은 작업이 끝나는 순간에만 확인할 수 있다. => 정확한 타잉에 인터럽트가 발생했는지 알 수 없다.

## 하드웨어를 이용한 해결 방법

### 인터럽트

​	CPU가 프로그램을 실행하고 있을 때, 입출력 하드웨어 등의 장치나 또는 예외상황이 방생하여 처리가 필요한 경우 CPU에 알려 처리하는 기술

*  인터럽트 시스템 

   적절한 전기 신호가 들어오면 CPU가 실행을 잠깐 중단시킬 수 있는 핀(칩에 연결된 전기적 접점)을 가지고 있다.

   프로세서 칩에는 **통합 주변장치**(온칩 I/O 장치) 들이 내부적으로 인터럽트 시스템에 연결되어 있다.

*  인터럽트 과정
   1.  CPU가 주의를 기울이는 주변장치가 **인터럽트를 요청**한다.
   2.  CPU는 현재 실행 중인 명령어를 완료한다.
   3.  프로세서는 현재 실행 중인 프로그램을 중단
   4.  **인터럽트 벡터** 탐색
   5.  인터럽트 벡터에 저장된 CPU의 인터럽트 핸들러 실행 : PC에 인터럽트 벡터에 저장값 세팅
       1.  PC (Program Counter) & SR (status Register)을 스택에 저장 (실행 중이던 프로그램 상태)
       2.  인터럽트 벡터에 해당하는 인터럽트 수행
       3.  프로그램 복구 : 스택에 저장한 PC와 SR 값 복구
   6.  중단된 프로그램 재실행 (중단된 시점 이후부터)



*  인터럽트 종류
   *  내부 인터럽트
      1.  하드웨어 고장 : 컴퓨터 고장, 데이터 전달 과정에서 비트 오류, 전원이 나간 경우
      2.  실행할 수 없는 명령어 : 인출한 명령어의 비트 패턴이 정의되어 있지 않은 경우
      3.  명령어 실행 오류 : 나누기 0
      4.  사용 권한 위배 : 운영체제만 사용할 수 있는 자원에 접근하는 경우
   *  외부 인터럽트
      1.  타이머 인터럽트 
      2.  입출력 인터럽트

*  특별한 인터럽트 제어

   *  인터럽트 실행을 막는 **마스크**

   *  인터럽트가 여러개 있는 시스템에는 **우선순위**가 있다.

      

1.  다른 프로그램은 접근할 수 없는 물리적 인터럽트에 접근하는 경우가 있다.

2.  운영체제는 일종의 **가상(virtual)** 인터럽트

3.  유닉스 운영체제는 **시그널 메커니즘 (이벤트)**

    

### 용어 정리

*  인터럽트 핸들러 (= 인터럽트 서브 루틴) : 인터럽트 요청시 반복적으로 수행하는 일
*  인터럽트 벡터 : 수행해야할 인터럽트의 주소를 가르키는 포인터

